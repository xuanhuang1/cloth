<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title> 加拿大鹅评测</title>
    <link rel="icon" href="./images/favicon.ico">
    <link href="./css/style.css" type="text/css" rel="stylesheet">
    <script src="./js/jquery.js"></script>
    <script src="./js/garden.js"></script>
    <script src="./js/functions.js"></script>
</head>

<body>
<div id="mainDiv" style="position:absolute; top:-100px; left:100px;">
    <div id="content">
        <div id="code" >
            <span class="comments">亲爱的苏博洋女士：</span><br/><br/>
            <span class="comments">值此深秋</span><br/>
            <span class="comments">我二位在此恭贺</span><br/><br/>
            <span class="comments">身体健康；万事如意；心想事成；学业进步</span><br/><br/>
            <span class="comments">年年有今日，岁岁有今朝</span><br/>
            <span class="comments">霸道总裁枕边绕</span><br/>
            <span class="comments">加拿大鹅身上穿</span><br/>
            <span class="comments">六年金榜题名日，不枉寒窗苦读时</span><br/>
            <br><br>
            <span class="comments"><b class="bb">仓促赠礼 汤欣宇 黄炫</b></span>
        </div>
        
    </div>
    <div id="loveHeart" style="position:absolute; bottom:10px; right:10px;">
            <canvas id="garden"></canvas>
            <div id="words">
                <div id="messages">
                    <img src="./images/zsr.png">
                </div>
                <div id="loveu">
                    <img src="./images/sr.png">
                </div>
            </div>
    </div>
    <div id="copyright">
        <center>
            <link rel="stylesheet" href="./css/cuplayer.css">
            <div style="position:absolute; top:50px; right:50px;">
                <audio id="main_audio" autoplay="autoplay" preload="auto" loop>
                    <source src="./mp3/birthday.mp3" type="audio/mpeg"/>
                    <embed id="main_audio_ie8" hidden="true" autostart="true" height="0" width=0 loop="true"
                           src="./mp3/birthday.mp3" autoplay="autoplay"/>
                </audio>
                <a class="c-white fs-12 icon-play rotate" id="btn-play" href="javascript:void(0);"></a>
            </div>
            <script type="text/javascript">
                //获取picid函数
                $(function () {
                    $("area").click(function () {
                        var picId = $(this).attr("data-id");
                        var picSrc = "images/img_big/" + picId + ".jpg"
                        $(".modal-content>.pic-box>img").attr("src", picSrc);
                    })
                    var isPlaying = function (audio) {
                        return !audio.paused;
                    }
                    var a = document.getElementById('main_audio');
                    if (!(a.play instanceof Function)) {
                        a = document.getElementById('main_audio_ie8');
                        isPlaying = function (audio) {
                            return audio.playState == 2;
                        }
                    }
                    $('#btn-play').on('click', function () {
                        if ($(this).hasClass('rotate')) {
                            a.pause();
                            $(this).removeClass('rotate');
                        } else {
                            a.play();
                            $(this).addClass('rotate');
                        }
                    });

                })
            </script>

        </center>
    </div>
</div>
<script type="text/javascript">
    var offsetX = $("#loveHeart").width() / 2;
    var offsetY = $("#loveHeart").height() / 2 - 55;
    var together = new Date();
    together.setHours(8);
    together.setMinutes(0);
    together.setSeconds(0);
    together.setMilliseconds(0);

    if (!document.createElement('canvas').getContext) {
        var msg = document.createElement("div");
        msg.id = "errorMsg";
        msg.innerHTML = "您的浏览器已经过时!请使用非IE浏览器进行预览";
        document.body.appendChild(msg);
        $("#code").css("display", "none")
        $("#copyright").css("position", "absolute");
        $("#copyright").css("bottom", "10px");
        document.execCommand("stop");
    } else {
    	
        adjustCodePosition();
        $("#code").typewriter();
        setTimeout(function () {
            startHeartAnimation();
        }, 5000);

        timeElapse(together);
        setInterval(function () {
            timeElapse(together);
        }, 500);

    }

	// 音乐播放
function autoPlayMusic() {
    // 自动播放音乐效果，解决浏览器或者APP自动播放问题
    function musicInBrowserHandler() {
        musicPlay(true);
        document.body.removeEventListener('touchstart', musicInBrowserHandler);
    }
    document.body.addEventListener('touchstart', musicInBrowserHandler);

    // 自动播放音乐效果，解决微信自动播放问题
    function musicInWeixinHandler() {
        musicPlay(true);
        document.addEventListener("WeixinJSBridgeReady", function () {
            musicPlay(true);
        }, false);
        document.removeEventListener('DOMContentLoaded', musicInWeixinHandler);
    }
    document.addEventListener('DOMContentLoaded', musicInWeixinHandler);
}
function musicPlay(isPlay) {
    var media = document.getElementById('main_audio');
    if (isPlay && media.paused) {
        media.play();
    }
    if (!isPlay && !media.paused) {
        media.pause();
    }
}
</script>
</div>


</body>
</html>
